INSERT INTO cads.enhanced_search_fields (
    field_group, field_name, field_type, display_order, gui_identifier, 
    created_by, created_date, updated_by, updated_date, is_active, 
    partition_date, is_sortable, collection_name, regex_enabled
) VALUES 
    ('Alert Details', 'ID', 'int', 1, 'enhsearch_alert_id', 
     'system', CURRENT_DATE, 'system', CURRENT_DATE, 'Y', 
     NULL, 'Y', 'alert_mst', 'N'),
    ('Alert Details', 'SOURCE_SYSTEM', 'string', 2, 'enhsearch_application_name', 
     'system', CURRENT_DATE, 'system', CURRENT_DATE, 'Y', 
     NULL, 'N', 'alert_mst', 'N'),
    ('Alert Details', 'OWNER', 'string', 3, 'enhsearch_assigned_to', 
     'system', CURRENT_DATE, 'system', CURRENT_DATE, 'Y', 
     NULL, 'Y', 'alert_mst', 'N'),
    ('Alert Details', 'OWNER_GROUP', 'string', 4, 'enhsearch_assigned_to_group', 
     'system', CURRENT_DATE, 'system', CURRENT_DATE, 'Y', 
     NULL, 'Y', 'alert_mst', 'N'),
    ('Alert Details', 'CREATED_DATE', 'date', 5, 'enhsearch_creation_date/time', 
     'system', CURRENT_DATE, 'system', CURRENT_DATE, 'Y', 
     NULL, 'Y', 'alert_mst', 'N'),
    ('Alert Details', 'DUE_TIME', 'string', 6, 'enhsearch_cut_off_time', 
     'system', CURRENT_DATE, 'system', CURRENT_DATE, 'Y', 
     NULL, 'N', 'alert_mst', 'Y'),
    ('Alert Details', 'INQUIRY_TYPE', 'string', 7, 'enhsearch_inquiry_type', 
     'system', CURRENT_DATE, 'system', CURRENT_DATE, 'Y', 
     NULL, 'N', 'alert_mst', 'N'),
    ('Alert Details', 'RULE_SET', 'string', 8, 'enhsearch_ruleset', 
     'system', CURRENT_DATE, 'system', CURRENT_DATE, 'Y', 
     NULL, 'N', 'alert_mst', 'N'),
    ('Alert Details', 'STEP_IDENTIFIER', 'string', 9, 'enhsearch_current_alert_step', 
     'system', CURRENT_DATE, 'system', CURRENT_DATE, 'Y', 
     NULL, 'N', 'alert_mst', 'Y'),
    ('Alert Details', 'SUB_STEP_IDENTIFIER', 'string', 10, 'enhsearch_current_alert_sub_step', 
     'system', CURRENT_DATE, 'system', CURRENT_DATE, 'Y', 
     NULL, 'N', 'alert_mst', 'N'),
    ('Alert Details', 'PP_MESSAGE', 'string', 11, 'enhsearch_transaction_message', 
     'system', CURRENT_DATE, 'system', CURRENT_DATE, 'Y', 
     NULL, 'N', 'alert_cstm_attribute', 'N'),
    ('BENEFICIARY', 'BENEFICIARY_CUSTOMER_NAME_ADDRESS_59', 'string', 1, 'enhsearch_59_beneficiary_customer_name_address', 
     'system', CURRENT_DATE, 'system', CURRENT_DATE, 'Y', 
     NULL, 'N', 'alert_det', 'N'),
    ('BENEFICIARY', 'ENRICH_BENEFICIARY_CUST_NAME_ADDR_59', 'string', 2, 'enhsearch_59_enrich_beneficiary_customer_name_address', 
     'system', CURRENT_DATE, 'system', CURRENT_DATE, 'Y', 
     NULL, 'N', 'alert_det', 'N'),
    ('BENEFICIARY', 'BENEFICIARY', 'string', 3, 'enhsearch_beneficiary', 
     'system', CURRENT_DATE, 'system', CURRENT_DATE, 'Y', 
     NULL, 'N', 'alert_det', 'N'),
    ('BENEFICIARY', 'BENEFICIARY_NAME', 'string', 4, 'enhsearch_beneficiary_name', 
     'system', CURRENT_DATE, 'system', CURRENT_DATE, 'Y', 
     NULL, 'N', 'alert_det', 'N'),
    ('BENEFICIARY', 'CDTR_NAME', 'string', 5, 'enhsearch_cdtr_name', 
     'system', CURRENT_DATE, 'system', CURRENT_DATE, 'Y', 
     NULL, 'N', 'alert_det', 'N'),
    ('BENEFICIARY', 'CREDITOR_NAME', 'string', 6, 'enhsearch_creditor_name', 
     'system', CURRENT_DATE, 'system', CURRENT_DATE, 'Y', 
     NULL, 'N', 'alert_det', 'N'),
    ('BENEFICIARY', 'ENRICH_CREDITOR_NAME', 'string', 7, 'enhsearch_enrich_creditor_name', 
     'system', CURRENT_DATE, 'system', CURRENT_DATE, 'Y', 
     NULL, 'N', 'alert_det', 'N'),
    ('BENEFICIARY', 'ENRICH_CREDITOR_NAME_ADDR', 'string', 8, 'enhsearch_enrich_creditor_name_address', 
     'system', CURRENT_DATE, 'system', CURRENT_DATE, 'Y', 
     NULL, 'N', 'alert_det', 'N'),
    ('BENEFICIARY', 'ORIGINAL_CREDITOR_NAME', 'string', 9, 'enhsearch_original_creditor_name', 
     'system', CURRENT_DATE, 'system', CURRENT_DATE, 'Y', 
     NULL, 'N', 'alert_det', 'N'),
    ('BENEFICIARY', 'ORIGINAL_CREDITOR_NAME_ADDR', 'string', 10, 'enhsearch_original_creditor_name_address', 
     'system', CURRENT_DATE, 'system', CURRENT_DATE, 'Y', 
     NULL, 'N', 'alert_det', 'N'),
    ('BENEFICIARY', 'SEQB_BENEFICIARY_CUST_NAME_ADDR', 'string', 11, 'enhsearch_seq_b_59_beneficiary_customer_name_address', 
     'system', CURRENT_DATE, 'system', CURRENT_DATE, 'Y', 
     NULL, 'N', 'alert_det', 'N'),
    ('BENEFICIARY', 'SEQB_ENRICH_BENEFICIARY_CUST_NAME_ADDR', 'string', 12, 'enhsearch_seq_b_59_enrich_beneficiary_customer_nm_addr', 
     'system', CURRENT_DATE, 'system', CURRENT_DATE, 'Y', 
     NULL, 'N', 'alert_det', 'N'),
    ('BENEFICIARY ACCOUNT', 'BENEFICIARY_ACCOUNT_ID', 'string', 1, 'enhsearch_beneficiary_account_id', 
     'system', CURRENT_DATE, 'system', CURRENT_DATE, 'Y', 
     NULL, 'N', 'alert_det', 'N'),
    ('BENEFICIARY ACCOUNT', 'BENEFICIARY_ACCOUNT_NUMBER', 'string', 2, 'enhsearch_beneficiary_account_number', 
     'system', CURRENT_DATE, 'system', CURRENT_DATE, 'Y', 
     NULL, 'N', 'alert_det', 'N'),
    ('BENEFICIARY ACCOUNT', 'CDTR_ACCOUNT_IBAN', 'string', 3, 'enhsearch_cdtr_account_iban', 
     'system', CURRENT_DATE, 'system', CURRENT_DATE, 'Y', 
     NULL, 'N', 'alert_det', 'N'),
    ('BENEFICIARY ACCOUNT', 'CREDITOR_ACCOUNT_IBAN', 'string', 4, 'enhsearch_creditor_account_iban', 
     'system', CURRENT_DATE, 'system', CURRENT_DATE, 'Y', 
     NULL, 'N', 'alert_det', 'N'),
    ('Match Details', 'COVERAGE_AREA', 'string', 1, 'enhsearch_coverage_area', 
     'system', CURRENT_DATE, 'system', CURRENT_DATE, 'Y', 
     NULL, 'N', 'hit_match_detail', 'N'),
    ('Match Details', 'DEFAULT_TAXONOMY', 'string', 2, 'enhsearch_default_taxonomy', 
     'system', CURRENT_DATE, 'system', CURRENT_DATE, 'Y', 
     NULL, 'N', 'hit_match_detail', 'N'),
    ('Match Details', 'CATEGORY', 'string', 3, 'enhsearch_list_name', 
     'system', CURRENT_DATE, 'system', CURRENT_DATE, 'Y', 
     NULL, 'N', 'hit_match_detail', 'N'),
    ('Match Details', 'HIT_PERCENTAGE', 'string', 4, 'enhsearch_match_accuracy', 
     'system', CURRENT_DATE, 'system', CURRENT_DATE, 'Y', 
     NULL, 'N', 'hit_match_detail', 'N'),
    ('Match Details', 'HIT_NUMBER', 'string', 5, 'enhsearch_match_number', 
     'system', CURRENT_DATE, 'system', CURRENT_DATE, 'Y', 
     NULL, 'N', 'hit_match_detail', 'N'),
    ('Match Details', 'MATCH_ON', 'string', 6, 'enhsearch_match_on', 
     'system', CURRENT_DATE, 'system', CURRENT_DATE, 'Y', 
     NULL, 'N', 'hit_match_detail', 'N'),
    ('Match Details', 'MATCH_PATTERN_VALUE', 'string', 7, 'enhsearch_match_pattern', 
     'system', CURRENT_DATE, 'system', CURRENT_DATE, 'Y', 
     NULL, 'N', 'hit_match_detail', 'N'),
    ('Match Details', 'MATCH_TEXT', 'string', 8, 'enhsearch_match_text', 
     'system', CURRENT_DATE, 'system', CURRENT_DATE, 'Y', 
     NULL, 'N', 'hit_match_detail', 'N');


INSERT INTO cads.gui_label (gui_identifier, role_identifier, label, user_language) VALUES 
    ('enhsearch_alert_id', 'default', 'Alert ID', 'en'),
    ('enhsearch_application_name', 'default', 'Application', 'en'),
    ('enhsearch_assigned_to', 'default', 'Assigned To', 'en'),
    ('enhsearch_assigned_to_group', 'default', 'Assigned To Group', 'en'),
    ('enhsearch_creation_date/time', 'default', 'Creation Date/Time', 'en'),
    ('enhsearch_cut_off_time', 'default', 'Cut off Time', 'en'),
    ('enhsearch_inquiry_type', 'default', 'Inquiry Type', 'en'),
    ('enhsearch_ruleset', 'default', 'Ruleset', 'en'),
    ('enhsearch_current_alert_step', 'default', 'Step', 'en'),
    ('enhsearch_current_alert_sub_step', 'default', 'Sub Step', 'en'),
    ('enhsearch_transaction_message', 'default', 'Transaction Message', 'en'),
    ('enhsearch_59_beneficiary_customer_name_address', 'default', '59: Beneficiary Customer Name & Address', 'en'),
    ('enhsearch_59_enrich_beneficiary_customer_name_address', 'default', '59: Enrich Beneficiary Customer Name & Address', 'en'),
    ('enhsearch_beneficiary', 'default', 'Beneficiary', 'en'),
    ('enhsearch_beneficiary_name', 'default', 'Beneficiary Name', 'en'),
    ('enhsearch_cdtr_name', 'default', 'Cdtr Name', 'en'),
    ('enhsearch_creditor_name', 'default', 'Creditor Name', 'en'),
    ('enhsearch_enrich_creditor_name', 'default', 'Enrich Creditor Name', 'en'),
    ('enhsearch_enrich_creditor_name_address', 'default', 'Enrich Creditor Name & Address', 'en'),
    ('enhsearch_original_creditor_name', 'default', 'Original Creditor Name', 'en'),
    ('enhsearch_original_creditor_name_address', 'default', 'Original Creditor Name & Address', 'en'),
    ('enhsearch_seq_b_59_beneficiary_customer_name_address', 'default', 'Seq B - 59: Beneficiary Customer Name & Address', 'en'),
    ('enhsearch_seq_b_59_enrich_beneficiary_customer_nm_addr', 'default', 'Seq B - 59: Enrich Beneficiary Customer Nm & Addr', 'en'),
    ('enhsearch_beneficiary_account_id', 'default', 'Beneficiary Account Id', 'en'),
    ('enhsearch_beneficiary_account_number', 'default', 'Beneficiary Account Number', 'en'),
    ('enhsearch_cdtr_account_iban', 'default', 'Cdtr Account IBAN', 'en'),
    ('enhsearch_creditor_account_iban', 'default', 'Creditor Account IBAN', 'en'),
    ('enhsearch_coverage_area', 'default', 'Coverage Area', 'en'),
    ('enhsearch_default_taxonomy', 'default', 'Default Taxonomy', 'en'),
    ('enhsearch_list_name', 'default', 'List Name', 'en'),
    ('enhsearch_match_accuracy', 'default', 'Match Accuracy %', 'en'),
    ('enhsearch_match_number', 'default', 'Match Number', 'en'),
    ('enhsearch_match_on', 'default', 'Match On', 'en'),
    ('enhsearch_match_pattern', 'default', 'Match Pattern', 'en'),
    ('enhsearch_match_text', 'default', 'Match Text', 'en');

INSERT INTO CADS.alert_det (
    id, alert_id, field_name, field_name_alias, field_value_offset, field_order, 
    created_by, field_value
) VALUES (
    1, 100, 'SAMPLE_FIELD', 'SAMPLE_ALIAS', 0, 1, 'system', 'Sample value'
);

-- Sample config data
INSERT INTO cads.search_config (table_name, column_name, search_type) VALUES
('products', 'name', 'LIKE'),
('products', 'description', 'LIKE'),
('products', 'price', 'BETWEEN'),
('products', 'category', 'REGEX');

CREATE TABLE cads.search_config (
    id SERIAL PRIMARY KEY,
    table_name VARCHAR(100),
    column_name VARCHAR(100),
    search_type VARCHAR(50)
);


CREATE TABLE cads.alert_cstm_attributes (
    alert_id numeric NOT NULL,
    pp_message text NOT NULL,
    created_date timestamp(0) NOT NULL DEFAULT CURRENT_DATE,
    created_by varchar(15) NOT NULL DEFAULT 'System'::character varying,
    partition_date timestamp(0) NOT NULL DEFAULT CURRENT_DATE,
    gi_message text,
    last_updated_by varchar(15),
    last_updated_date timestamp(0),
    is_post_positive_completed bpchar(1),
    is_early_pp_completed bpchar(1)
)
PARTITION BY RANGE (partition_date);

CREATE TABLE cads.hit_match_detail (
    id numeric NOT NULL,
    match_pattern_value varchar(700) NOT NULL,
    hit_percentage numeric NOT NULL,
    matchable_description varchar(4000),
    category varchar(400),
    created_date timestamp(0) NOT NULL DEFAULT CURRENT_DATE,
    created_by varchar(50) NOT NULL DEFAULT 'System'::character varying,
    alert_det_id numeric NOT NULL,
    "offset" numeric,
    match_length numeric NOT NULL,
    "version" numeric,
    last_transitioned_by varchar(50),
    partition_date timestamp(0) NOT NULL DEFAULT CURRENT_DATE,
    alert_id numeric,
    hit_number numeric(40),
    hit_type varchar(250),
    match_text varchar(4000),
    taxonomy_sub_taxonomy_id numeric,
    coverage_area varchar(100),
    specific_coverage_area varchar(255),
    is_final_decision bpchar(1) DEFAULT 'N'::bpchar,
    hit_touch_count numeric(40),
    confirmed_false_match bpchar(1) DEFAULT 'N'::bpchar,
    l3_escalation_not_required bpchar(1) DEFAULT 'N'::bpchar,
    category_lookup varchar(40),
    rule_checksum varchar(40),
    repair_checksum varchar(40),
    l3_checker_required bpchar(1) DEFAULT 'N'::bpchar,
    is_default_taxonomy bpchar(1) DEFAULT 'N'::bpchar,
    last_updated_date timestamp(0),
    add_matchable_description varchar(4000),
    mid_type varchar(18),
    list_entry_type varchar(50),
    list_entry_type_mg varchar(50),
    is_batch_disposed bpchar(1),
    bulk_process_req_id int4,
    rule_engine_id int4
)
PARTITION BY RANGE (partition_date);


CREATE TABLE cads.alert_det (
    id numeric NOT NULL,
    alert_id numeric NOT NULL,
    field_name varchar(4000) NOT NULL,
    field_name_alias varchar(100) NOT NULL,
    field_value_offset numeric NOT NULL,
    field_order numeric NOT NULL,
    created_date timestamp(0) DEFAULT (clock_timestamp() AT TIME ZONE COALESCE(current_setting('aws_oracle_ext.tz'::text, true), 'UTC'::text))::timestamp(0) WITHOUT TIME ZONE,
    last_updated_date timestamp(0),
    created_by varchar(50) NOT NULL DEFAULT 'System'::character varying,
    last_updated_by varchar(50),
    "version" numeric,
    partition_date timestamp(0) NOT NULL DEFAULT CURRENT_DATE,
    field_value varchar(4000),
    is_field_value_clob bpchar(1)
)
PARTITION BY RANGE (partition_date);

CREATE INDEX alert_det_alert_id_idx ON cads.alert_det USING btree (alert_id);



SELECT esf.collection_name AS table_name,
               esf.field_name AS column_name,
               esf.field_type AS column_type,
               esf.regex_enabled
        FROM cads.enhanced_search_fields esf
        JOIN cads.gui_label gl ON esf.gui_identifier = gl.gui_identifier
        WHERE esf.is_active = 'Y';

